<!DOCTYPE html>
<html lang="ko">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERP ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/tabs.css"> <!-- ì¶”ê°€ëœ CSS íŒŒì¼ -->
    <script th:if="${authority eq 'ADMIN'}">
        const eventSource = new EventSource('http://localhost:8080/subscribe/1');

        eventSource.addEventListener('sse', event => {
            console.log(event.data);
            showNotifications(event.data); // Corrected function name
        });

        function showNotifications(message) {
            // ì•Œë¦¼ì„ í‘œì‹œí•˜ëŠ” ë¡œì§ ì¶”ê°€
            var notification = document.createElement('div');
            notification.className = 'notification';

            // ì•Œë¦¼ ë©”ì‹œì§€
            var messageContent = document.createElement('span');
            messageContent.textContent = message;
            notification.appendChild(messageContent);

            // ë‹«ê¸° ë²„íŠ¼
            var closeButton = document.createElement('span');
            closeButton.textContent = 'x';
            closeButton.className = 'close-button';
            closeButton.onclick = function() {
                document.body.removeChild(notification);
            };
            notification.appendChild(closeButton);

            document.body.appendChild(notification);
        }
    </script>


</head>
<body>
<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="navbar">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ë“¤ ì¶”ê°€ -->
    <ul class="nav-links">
        <li class="company-name">ERP wizard</li>
        <li><a href="#" onclick="changeSidebar('menu1')">ì œí’ˆ</a></li>
        <li><a href="#" onclick="changeSidebar('menu2')">ê±°ë˜ì²˜</a></li>
        <li><a href="#" onclick="changeSidebar('menu3')">ë³´ê³ ì„œ</a></li>
        <li><a href="#" onclick="changeSidebar('menu4')">ì£¼ë¬¸</a></li>
        <li><a href="#" onclick="changeSidebar('menu5')">FAQ</a></li>
        <li id="notification-icon"><a style="cursor: pointer">ğŸ””</a></li>
    </ul>
</nav>

<!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
<aside class="sidebar" id="sidebar">
    <!-- ê¸°ë³¸ ì‚¬ì´ë“œë°” ë‚´ìš© -->
    <ul class="sidebar-links">
        <li><a href="#" onclick="addTab('ì œí’ˆê´€ë¦¬','/product_list')">ì œí’ˆê´€ë¦¬</a></li>
    </ul>
</aside>

<!-- ì˜¤ë¥¸ìª½ ë©”ì¸ í™”ë©´ -->
<main class="main-content" id="mainContent">
    <!-- ë©”ì¸ ì»¨í…ì¸  ë‚´ìš© ì¶”ê°€ -->
    <div id="tabs" class="tabs-container"></div>
    <div id="tabContents" class="tab-contents"></div>
</main>
<script src="js/tabs.js"></script> <!-- ì¶”ê°€ëœ JavaScript íŒŒì¼ -->

<script>
    var selectedTabId = '';
</script>
</body>
</html>
<style>
    .notification {
        position: fixed;
        top: 120px; /* ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ í•˜ë‹¨ì— ì •ë ¬í•˜ë ¤ë©´ ì¡°ì ˆ í•„ìš” */
        right: 20px;
        background-color: #28a745; /* ì•Œë¦¼ ë°°ê²½ìƒ‰ */
        color: #fff;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
</style>
